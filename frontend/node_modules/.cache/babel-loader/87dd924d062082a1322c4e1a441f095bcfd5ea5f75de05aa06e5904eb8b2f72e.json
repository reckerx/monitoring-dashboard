{"ast":null,"code":"// src/App.js\nimport React,{useEffect,useState}from\"react\";import{fetchMetrics}from\"./api\";import MetricCard from\"./components/MetricCard\";import MetricChart from\"./components/MetricChart\";import\"./styles.css\";import{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const POLL_INTERVAL_MS=10000;// 10 seconds\nfunction App(){const[latestMetrics,setLatestMetrics]=useState(null);const[history,setHistory]=useState([]);useEffect(()=>{let isMounted=true;const loadMetrics=async()=>{try{const data=await fetchMetrics();if(!isMounted)return;setLatestMetrics(data);setHistory(prev=>[...prev.slice(-59),{timestamp:data.timestamp,cpu_usage:data.cpu_usage,memory_usage:data.memory_usage,request_latency_ms:data.request_latency_ms}]);}catch(err){console.error(\"Error fetching metrics:\",err);}};loadMetrics();const intervalId=setInterval(loadMetrics,POLL_INTERVAL_MS);return()=>{isMounted=false;clearInterval(intervalId);};},[]);const cpuData=history.map(h=>({timestamp:h.timestamp,value:h.cpu_usage}));const memoryData=history.map(h=>({timestamp:h.timestamp,value:h.memory_usage}));const latencyData=history.map(h=>({timestamp:h.timestamp,value:h.request_latency_ms}));return/*#__PURE__*/_jsxs(\"div\",{className:\"app-container\",children:[/*#__PURE__*/_jsxs(\"header\",{className:\"app-header\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Monitoring Dashboard\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Simple real-time view of backend metrics (polls every 10s)\"})]}),!latestMetrics?/*#__PURE__*/_jsx(\"p\",{className:\"loading-text\",children:\"Loading metrics...\"}):/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsxs(\"section\",{className:\"cards-grid\",children:[/*#__PURE__*/_jsx(MetricCard,{label:\"CPU Usage\",value:latestMetrics.cpu_usage,unit:\"%\"}),/*#__PURE__*/_jsx(MetricCard,{label:\"Memory Usage\",value:latestMetrics.memory_usage,unit:\"%\"}),/*#__PURE__*/_jsx(MetricCard,{label:\"Request Latency\",value:latestMetrics.request_latency_ms,unit:\"ms\"}),/*#__PURE__*/_jsx(MetricCard,{label:\"Requests Served\",value:latestMetrics.request_count}),/*#__PURE__*/_jsx(MetricCard,{label:\"Uptime\",value:latestMetrics.uptime_seconds,unit:\"s\"})]}),/*#__PURE__*/_jsxs(\"section\",{className:\"charts-grid\",children:[/*#__PURE__*/_jsx(MetricChart,{title:\"CPU Usage Over Time\",dataPoints:cpuData,label:\"CPU %\"}),/*#__PURE__*/_jsx(MetricChart,{title:\"Memory Usage Over Time\",dataPoints:memoryData,label:\"Memory %\"}),/*#__PURE__*/_jsx(MetricChart,{title:\"Request Latency Over Time\",dataPoints:latencyData,label:\"Latency (ms)\"})]})]})]});}export default App;","map":{"version":3,"names":["React","useEffect","useState","fetchMetrics","MetricCard","MetricChart","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","POLL_INTERVAL_MS","App","latestMetrics","setLatestMetrics","history","setHistory","isMounted","loadMetrics","data","prev","slice","timestamp","cpu_usage","memory_usage","request_latency_ms","err","console","error","intervalId","setInterval","clearInterval","cpuData","map","h","value","memoryData","latencyData","className","children","label","unit","request_count","uptime_seconds","title","dataPoints"],"sources":["/Users/raunaknamdeo/Death/Monitoring Dashboard/frontend/src/App.js"],"sourcesContent":["// src/App.js\nimport React, { useEffect, useState } from \"react\";\nimport { fetchMetrics } from \"./api\";\nimport MetricCard from \"./components/MetricCard\";\nimport MetricChart from \"./components/MetricChart\";\nimport \"./styles.css\";\n\nconst POLL_INTERVAL_MS = 10000; // 10 seconds\n\nfunction App() {\n  const [latestMetrics, setLatestMetrics] = useState(null);\n  const [history, setHistory] = useState([]);\n\n  useEffect(() => {\n    let isMounted = true;\n\n    const loadMetrics = async () => {\n      try {\n        const data = await fetchMetrics();\n        if (!isMounted) return;\n\n        setLatestMetrics(data);\n\n        setHistory((prev) => [\n          ...prev.slice(-59),\n          {\n            timestamp: data.timestamp,\n            cpu_usage: data.cpu_usage,\n            memory_usage: data.memory_usage,\n            request_latency_ms: data.request_latency_ms,\n          },\n        ]);\n      } catch (err) {\n        console.error(\"Error fetching metrics:\", err);\n      }\n    };\n\n    loadMetrics();\n    const intervalId = setInterval(loadMetrics, POLL_INTERVAL_MS);\n\n    return () => {\n      isMounted = false;\n      clearInterval(intervalId);\n    };\n  }, []);\n\n  const cpuData = history.map((h) => ({\n    timestamp: h.timestamp,\n    value: h.cpu_usage,\n  }));\n\n  const memoryData = history.map((h) => ({\n    timestamp: h.timestamp,\n    value: h.memory_usage,\n  }));\n\n  const latencyData = history.map((h) => ({\n    timestamp: h.timestamp,\n    value: h.request_latency_ms,\n  }));\n\n  return (\n    <div className=\"app-container\">\n      <header className=\"app-header\">\n        <h1>Monitoring Dashboard</h1>\n        <p>Simple real-time view of backend metrics (polls every 10s)</p>\n      </header>\n\n      {!latestMetrics ? (\n        <p className=\"loading-text\">Loading metrics...</p>\n      ) : (\n        <>\n          <section className=\"cards-grid\">\n            <MetricCard label=\"CPU Usage\" value={latestMetrics.cpu_usage} unit=\"%\" />\n            <MetricCard label=\"Memory Usage\" value={latestMetrics.memory_usage} unit=\"%\" />\n            <MetricCard\n              label=\"Request Latency\"\n              value={latestMetrics.request_latency_ms}\n              unit=\"ms\"\n            />\n            <MetricCard\n              label=\"Requests Served\"\n              value={latestMetrics.request_count}\n            />\n            <MetricCard\n              label=\"Uptime\"\n              value={latestMetrics.uptime_seconds}\n              unit=\"s\"\n            />\n          </section>\n\n          <section className=\"charts-grid\">\n            <MetricChart\n              title=\"CPU Usage Over Time\"\n              dataPoints={cpuData}\n              label=\"CPU %\"\n            />\n            <MetricChart\n              title=\"Memory Usage Over Time\"\n              dataPoints={memoryData}\n              label=\"Memory %\"\n            />\n            <MetricChart\n              title=\"Request Latency Over Time\"\n              dataPoints={latencyData}\n              label=\"Latency (ms)\"\n            />\n          </section>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}